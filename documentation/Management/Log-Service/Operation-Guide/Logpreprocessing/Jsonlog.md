# JSON提取模式
## 概述
JSON格式是指将以换行符为结束标志的JSON日志，按照JSON日志的规则进行结构化处理。将首层KEY作为字段的键，首层的VALUE作为字段的值，进行存储。暂不支持对象和数组的解析，将直接解析成类型为string的值。

## 前置条件
1. 已创建日志集日志主题。
2. 日志源选择了业务应用日志，并完成了日志源的设置。
3. 进入日志预处理步骤。

## 操作步骤
1. 将键值提取模式切换至“JSON格式”。
2. 输入或粘贴日志样例。
3. 点击“提取字段”，将会按照JSON模式对日志样例中的日志进行键值提取。提取结果展示在下方的日志提取字段列表中。如果提取失败，则需要检查输入的日志样例是否为JSON格式。
4. 默认所有字段都是string类型，用户需要根据**实际情况调整字段的类型**，只有数值类型的字段支持聚合计算。
5. 默认将所有提取的字段进行存储，用户可删除不需要存储和检索的字段。

<img src="https://raw.githubusercontent.com/jdcloudcom/cn/zhangwenjie-only/image/LogService/operationguide/JSON.jpg" width=60% height=60% />

## 注意事项
1. JSON日志样例不超过1K.
2. JSON格式提取键值对时，暂不支持提取数组和对象。
3. 提取的字段数量及类型的限制如下：字符串(String)类型的字段不能超过30个,整数(Integer)类型的字段不能超过20个,浮点数(Float)类型的字段不能超过20个,时间(Time)类型的字段不能超过5个,IP类型的字段不能超过5个。
4. 至少保留一个提取后的字段，不可删除所有提取的字段。
5. Time类型的字段需要用户设置时间解析格式，解析格式最多输入64个字符。
6. 保存时，会对提取的各个字段同日志样例作比对，如果校验不通过则不允许保存，相关校验限定如下：
   - 如果样例为string类型，则对应提取字段必须指定为string类型。
   - 如果key为timestamp，则字段类型必须指定为time类型。
   - 如果是IP地址，可以指定为IP或string类型。
   - 如果是数字（整数），需指定为int类型。
   - 如果是数字（浮点数），需指定为float类型。

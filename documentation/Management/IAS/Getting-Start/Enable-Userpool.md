# 启用用户池

本文介绍如何启用一个用户池，涉及到创建用户池、关联应用并实现用户注册和登录。

## 创建池

目前支持通过OpenAPI创建池。

创建池时，可以指定用户注册时是否进行手机号和邮箱的必填校验和唯一性校验。默认情况下不进行校验。
对手机或邮箱进行必填校验，意味着用户必须在注册环节绑定一个手机号或邮箱，创建用户时池会进行验证；
对手机或邮箱进行唯一性校验，意味着一个手机号或邮箱只能关联一个池用户，创建用户或修改用户信息时池会进行校验。**这两个设置在池创建后不可进行更改。

池创建后，默认支持以下用户信息字段：

| 字段 | 字段名 | 格式说明 | 创建用户时池是否进行必填校验 |
| ---- | ----- | --------- | -------------- |
| 用户名 | userName | 4-30位，支持字母、数字、汉字、-、_(不能是纯数字) | 是 |
| 密码 | password | 根据池密码强度设置确定 | 根据池IdP设置确定，默认为必填字段 |
| 昵称 | nickName | 1-100位，任意字符 | 否 |
| 显示名称 | name | 1-100位，任意字符 | 否 |
| 用户资料 | profile | 1-2000位，任意字符 | 否 |
| 手机号 | mobile | 支持中国大陆手机号格式 | 根据池必填校验设置确定 |
| 邮箱 | email | 邮箱格式 |  根据池必填校验设置确定 |
| 自定义角色 | customRole | 1-100位，任意字符 | 否 |
| 扩展信息 | meta | 1-500位，任意字符| 否 |

## 关联应用

目前支持通过OpenAPI关联池应用。

首先，请创建一个面向用户池用户的应用，并接入京东智联云OAuth2.0服务。然后，将应用ID与池关联。注意
1. 只能关联同一京东智联云账户下的应用和池
2. 应用与池关联时，池会同步记录该应用的名称，以作为向用户发送消息时的应用显示名称。关联完成后再对应用名称进行修改，将不再同步到池

## 功能实现

* 注册

目前支持应用调用创建池用户接口实现用户注册，注册用户默认使用用户名和密码登录。如需指定用户使用手机或邮箱登录，可再调用登录属性设置接口。

* 登录

应用登录时，直接发起OAuth2.0授权请求即可转到池的登录页。

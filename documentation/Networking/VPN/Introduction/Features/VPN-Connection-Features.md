## VPN连接

### 基本概念
VPN连接(VPN Connection)，VPN连接是一组云端公网地址和一组客户端公网地址间建立的VPN隧道的集合，用于分配VPN云端公网IP、统一隧道的路由方式(静态/BGP，基于业务高可用的考虑，建议使用BGP路由)。

VPN隧道(VPN Tunnel)，VPN隧道是一个云端公网地址和一个客户端公网地址间建立的IPsec Site-To-Site加密通道，用于保证不同网络环境的业务进行安全通信。VPN隧道的建立包括IKE和IPsec的两阶段协商，支持安全性较高的加密、认证算法。

``每个VPN隧道的最大带宽处理能力为1.5Gbps。``


### 云端公网地址
基于边界网关和客户网关创建VPN连接后，会为VPN连接自动分配云端的公网地址，作为VPN隧道的云端公网地址。

基于业务高可用的实现，会自动分配两个公网地址，强烈建议客户使用此两个公网地址同时与客户端建立VPN隧道，同时配合使用BGP动态路由协议，实现连接级的隧道高可用，保证业务的连续性和可用性。

### 统一的路由方式
在VPN连接中配置路由方式，该VPN连接下的所有VPN隧道共用此配置，建议启用BGP路由。

### 配置VPN隧道
在VPN连接的一个公网地址和客户网关的一个公网地址之间建立的基于路由的加密隧道，用于VPN两端网络环境的内网通信。

VPN隧道基于IKE、IPsec进行协商建立，支持IKE v1、v2，支持SHA1、SHA256等认证算法，支持AES128、AES256等加密算法，支持Group2、Group5等Diffie-Hellman密钥协商机制，支持DPD隧道活性探测等特性。

云端VPN隧道创建后，将自动发起和客户端的隧道协商。

### 管理VPN隧道
VPN隧道支持管理状态和运行状态，管理状态用于显示当前VPN隧道是否可用于协商建立隧道，运行状态用于显示当前VPN隧道的隧道可用状态。

默认情况下，隧道的管理状态为“UP”，此时隧道可自动进行协商建立，当隧道协商建立成功后(即隧道的运行状态为“UP”时)即可进行正常通信。

当客户需要对某条隧道或客户端设备进行维护升级或配置变更时，请将隧道的管理状态置为“DOWN”，此时业务流量将不再路由到该隧道，待设备升级或配置变更完成后，请再次将隧道的管理状态置为“UP”，此时隧道将基于新配置进行重新协商建立。

```
  请务必在隧道配置变更前将隧道的管理状态置为“DOWN”，以免隧道意外断开并重新协商建立导致业务流量中断。
```

### 监控
在VPN连接上支持查看该VPN连接下所有隧道的相关监控信息，最多支持查看14天内的监控数据，包括原始流入/流出流量速率、加密后流入/流出流量速率、流入/流出数据包速率，其它监控项陆续支持中。
